1,包结构
action  dao  domain service utils  applicationContext.xml   struts.xml  log4j

2，applicationContext.xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	http://www.springframework.org/schema/beans/spring-beans.xsd
	http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context.xsd
	http://www.springframework.org/schema/aop
	http://www.springframework.org/schema/aop/spring-aop.xsd
	http://www.springframework.org/schema/tx 
	http://www.springframework.org/schema/tx/spring-tx.xsd">
	
	
	<!-- 先配置C3P0的连接池 -->
	<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
		<property name="driverClass" value="com.mysql.jdbc.Driver"/>
		<property name="jdbcUrl" value="jdbc:mysql://localhost:3306/dd"/>
		<property name="user" value="root"/>
		<property name="password" value="root"/>
	</bean>
	
	<!-- LocalSessionFactoryBean加载配置文件 -->
	<bean id="sessionFactory" class="org.springframework.orm.hibernate5.LocalSessionFactoryBean">
		<!-- 先加载连接池 -->
		<property name="dataSource" ref="dataSource"/>
		<!-- 加载方言，加载可选 -->
		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
				<prop key="hibernate.show_sql">true</prop>
				<prop key="hibernate.format_sql">true</prop>
				<prop key="hibernate.hbm2ddl.auto">update</prop>
			</props>
		</property>
		
	<!-- 引入映射的配置文件-->
		<property name="mappingResources">
			<list>
				<value>tlb/ljj/domain/User.hbm.xml</value>
			</list>
		</property> 
		</bean>
		
	<!-- 事务管理 -->
	<bean id="transactionManager" class="org.springframework.orm.hibernate5.HibernateTransactionManager">
	<property name="sessionFactory" ref="sessionFactory"></property>
	</bean>
	
	<tx:annotation-driven transaction-manager="transactionManager"/>
	
	<!-- 用户模块  
	<bean id="useraction" class="tlb.ljj.action.UserAction" scope="prototype">
	<property name="" ref=""/>
	</bean>-->

</beans>


3，struts.xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
	<!-- <constant name="struts.multipart.maxSize" value="2097152000"></constant> -->
	<!-- 先配置包结构 -->
	<package name="demo" extends="struts-default" namespace="/">

		<!-- <interceptors> <interceptor name="userInterceptor" class="ljj.tlb.interceptor.UserInterceptor"></interceptor> 
			</interceptors> -->

		<!-- 配置全局的结果页面 -->
		<global-results>
			<result name="login" type="redirect">/login.jsp</result>
		</global-results>

		<!-- 用户模块
		<action name="user_*" class="useraction" method="{1}">
			<result name="index">/index.jsp</result>
		</action> -->

	</package>
</struts>

4，web.xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://java.sun.com/xml/ns/javaee"
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
	id="WebApp_ID" version="2.5">
	<display-name>test</display-name>


	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>classpath:applicationContext.xml</param-value>
	</context-param>


	<!-- 解决延迟加载的问题 <filter> <filter-name>OpenSessionInViewFilter</filter-name> 
		<filter-class>org.springframework.orm.hibernate5.support.OpenSessionInViewFilter</filter-class> 
		</filter> <filter-mapping> <filter-name>OpenSessionInViewFilter</filter-name> 
		<url-pattern>/*</url-pattern> </filter-mapping> -->

	<!-- 核心过滤器 -->
	<filter>
		<filter-name>struts2</filter-name>
		<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>struts2</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

	<error-page>
		<error-code>500</error-code>
		<location>/jsp/error.jsp</location>
	</error-page>

	<welcome-file-list>
		<welcome-file>index.jsp</welcome-file>
	</welcome-file-list>
</web-app>

5,index.jsp bootstrap4
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="css/bootstrap.css" type="text/css" />
<script src="js/jquery-1.9.1.js"></script>
<script src="js/bootstrap.js"></script>
<style>
.fakeimg {
	height: 200px;
	background: #aaa;
}
</style>
<script type="text/javascript">
function regist() {
	var hei = 600;
	var wid = 800;
	var top = (screen.height-hei)/2;
	var left = (screen.width-wid)/2;
	window.open("<%=request.getContextPath()%>/page/regist.jsp","regist","height="+hei+"px,width="+wid+"px,top="+top+"px,left="+left+"px,location=no");
}
</script>
<title>demo</title>
</head>
<body>
	<div class="jumbotron text-center" style="margin-bottom: 0">
		<h1>demo</h1>
		<p>xxxxxxxxxxxxx。</p>
	</div>

	<nav class="navbar navbar-expand-sm bg-dark navbar-dark"> <a
		class="navbar-brand" href="#">导航</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse"
		data-target="#collapsibleNavbar">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="collapsibleNavbar">
		<ul class="navbar-nav">
			<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
			<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
			<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
		</ul>
		<div class="collapse navbar-collapse justify-content-end">
			<button type="button" class="btn">登 录</button>&nbsp;&nbsp;
			<button id="regButton" type="button" class="btn btn-primary" onclick="regist()">注 册</button>
		</div>
	</div>
	</nav>

	<div class="container" style="margin-top: 30px">
		<div class="row">
			<div class="col-sm-4">
				<h2>关于我</h2>
				<h5>我的照片:</h5>
				<div class="fakeimg">这边插入图像</div>
				<p>关于我的介绍..</p>
				<h3>一些链接</h3>
				<p>说明文本</p>
				<ul class="nav nav-pills flex-column">
					<li class="nav-item"><a class="nav-link active" href="#">激活状态</a>
					</li>
					<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
					<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
					<li class="nav-item"><a class="nav-link disabled" href="#">禁用</a>
					</li>
				</ul>
				<hr class="d-sm-none">
			</div>
			<div class="col-sm-8">
				<h2>标题</h2>
				<h5>副标题</h5>
				<div class="fakeimg">图像</div>
				<p>一些文本..</p>
				<p>xxx，xxxxxxxxxxxxxxxxxx。。。xxx，xxxxxxxxxxxxxxxxxx。。。xxx，xxxxxxxxxxxxxxxxxx。。。</p>
				<br>
				<h2>标题</h2>
				<h5>副标题</h5>
				<div class="fakeimg">图像</div>
				<p>一些文本..</p>
				<p>xxx，xxxxxxxxxxxxxxxxxx。。。xxx，xxxxxxxxxxxxxxxxxx。。。xxx，xxxxxxxxxxxxxxxxxx。。。</p>
			</div>
		</div>
	</div>

	<div class="jumbotron text-center" style="margin-bottom: 0">
		<p>底部内容</p>
	</div>
</body>
</html>

6,regist.jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet"
	href="<%=request.getContextPath()%>/css/bootstrap.css" type="text/css" />
<script src="<%=request.getContextPath()%>/js/jquery-1.9.1.js"></script>
<script src="<%=request.getContextPath()%>/js/bootstrap.js"></script>
<style>
.fakeimg {
	height: 200px;
	background: #aaa;
}
</style>
<title>注册</title>
</head>
<body>
	<div class="jumbotron text-center" style="margin-bottom: 0">
		<h1>注册</h1>
		<p>regist。</p>
	</div>

	<nav class="navbar navbar-expand-sm bg-dark navbar-dark"> <a
		class="navbar-brand" href="#">导航</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse"
		data-target="#collapsibleNavbar">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="collapsibleNavbar">
		<ul class="navbar-nav">
			<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
			<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
			<li class="nav-item"><a class="nav-link" href="#">链接</a></li>
		</ul>
	</div>
	</nav>
	<div class="container">
		<h4></h4>
		<form action="<%=request.getContextPath()%>/user/login.action" method="post">
			<div class="form-group">
				<label for="pwd">username:</label> <input type="text"
					class="form-control" id="username" placeholder="Enter username">
			</div>
			<div class="form-group">
				<label for="email">Email:</label> <input type="email"
					class="form-control" id="email" placeholder="Enter email">
			</div>
			<div class="form-group">
				<label for="pwd">Password:</label> <input type="password"
					class="form-control" id="pwd" placeholder="Enter password">
			</div>
			<div class="form-check">
				<label class="form-check-label"> <input
					class="form-check-input" type="checkbox"> Remember me
				</label>
			</div>
			<button type="submit" class="btn btn-primary">Submit</button>
		</form>
	</div>
	<h4></h4>
	<div class="jumbotron text-center" style="margin-bottom: 0">
		<p>底部内容</p>
	</div>
</body>
</html>

7,user
package tlb.ljj.domain;

public class User {
	private int uid;
	private String username;
	private String password;
	private String email;
	
	public String getUsername() {
		return username;
	}
	public void setUsername(String username) {
		this.username = username;
	}
	public String getPassword() {
		return password;
	}
	public void setPassword(String password) {
		this.password = password;
	}
	public String getEmail() {
		return email;
	}
	public void setEmail(String email) {
		this.email = email;
	}
	public int getUid() {
		return uid;
	}
	public void setUid(int uid) {
		this.uid = uid;
	}
	
	
}

8,user.hbm.xml
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Mapping file autogenerated by MyEclipse Persistence Tools -->
<hibernate-mapping>
	<class name="tlb.ljj.domain.User" table="user" catalog="dd">
		<id name="uid" type="java.lang.Integer">
			<column name="uid" />
			<generator class="native" />
		</id>
		<property name="username" type="java.lang.String">
			<column name="username" length="25" />
		</property>
		<property name="password" type="java.lang.String">
			<column name="password" length="25" />
		</property>
		<property name="email" type="java.lang.String">
			<column name="email" length="25" />
		</property>
	</class>
</hibernate-mapping>

9,useraction
package tlb.ljj.action;

import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;

import tlb.ljj.domain.User;

public class UserAction extends ActionSupport implements ModelDriven<User> {

	private User user = new User();
	
	@Override
	public User getModel() {
		return user;
	}

}




















